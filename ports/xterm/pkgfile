info='Default Terminal Emulator for X11'
version=348
source=http://invisible-mirror.net/archives/$name/$name-$version.tgz
deps='xorg-libxaw xorg-libxinerama netbsd-curses freetype-harfbuzz'
sha256=8b1f5121dbf3690de9d85a3b9329e3357021705dd7c21da192e47542769275be
build() {
    # xterm doesn't understand 'pkgconf --static'
    PKG_CONFIG=pkgconf \
    bonsai_configure \
        --enable-256-color \
        --enable-wide-chars \
        --enable-freetype \
        --enable-boxchars \
        --enable-highlighting \
        --enable-bold-color \
        --disable-ziconbeep \
        --disable-rpath-hack \
        --disable-warnings \
        --disable-desktop \
        --disable-imake \
        --with-xinerama \
        --without-valgrind

    # don't use xterm's provided dynamic linking script
    sed 's|$(SHELL).*plink.sh ||g' Makefile > tmp
    mv -f tmp Makefile

    bonsai_make LIBS="$(pkgconf --static --libs xaw7 xinerama ncurses freetype2)"
    bonsai_make install
}

info='GNU parser generator, a clone of yacc'
version=3.4.2
source=http://ftp.gnu.org/gnu/$name/$name-$version.tar.xz
deps='m4 perl'
sha256=27d05534699735dc69e86add5b808d6cb35900ad3fd63fa82e3eb644336abfa0
prebuild() {
    # don't compile useless examples
    find examples -name Makefile -exec echo 'all:' > "{}" \;
}
build() {
    # bison does not nop its test exit codes
    # causing the build to abort under set -e
    set +e

    # relocatable allows bison to work with the static philosophy
    bonsai_configure --enable-relocatable
    bonsai_make

    bonsai_make install

    set -e
}
